# MySQL中发生死锁的处理

## 什么是死锁

死锁是指两个或多个事务相互持有对方需要的锁，导致所有事务都无法继续执行的情况。例如：

事务A持有资源1的锁，等待获取资源2的锁
事务B持有资源2的锁，等待获取资源1的锁

## MySQL 对死锁的自动处理

MySQL InnoDB 引擎具有内置的死锁检测机制：

自动检测：InnoDB 会定期检查事务等待图，寻找循环依赖
自动处理：一旦检测到死锁，会选择一个"牺牲者"(victim)事务进行回滚
通常选择回滚代价最小的事务（如修改记录行数最少的）

除此之外还有锁等待超时的参数（innodb_lock_wait_timeout），当获取锁的等待时间超过阈值，便会释放锁并回滚。

## 手动 kill 发生死锁的语句
